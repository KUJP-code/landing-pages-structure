<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>リダイレクト中...</title>
</head>
<body>
 <script>

// WELCOME TO SWITCHING YARD v2.5.9

// THIS TOOL HAS BEEN CREATED TO SIMPLIFY QR CODE CREATION, REDIRECTION AND METRIC TRACKING.
// PLEASE CONTACT MIKE FARADAY IF YOU WISH TO ADD A QR CODE AND TRACK AN AD CAMPAIGN

// EVENTS and CAMPAIGNS NAMES - EDIT THESE AS AND WHEN WE LAUNCH ONE

const landingPageUrlSlugs = {
    seasonal1: "events/spring-school-2025",
    seasonal2: "events/summer-school-2025",
    seasonal3: "events/winter-school-2025",
    event1: "events/mascot-party",
    event2: "events/science-fair-2025",
    event3: "unset",
    event4: "events/halloween-2025",
    event5: "events/christmas-2025",
};

const signUpUrlSlugs = {
    seasonal1: "https://kids-up.app/",
    seasonal2: "https://kids-up.app/",
    seasonal3: "https://kids-up.app/",
    event1: "https://kids-up.app/",
    event2: "https://kids-up.app/",
    event3: "unset",
    event4: "https://kids-up.app/",
    event5: "https://kids-up.jp/events/christmas-2025/form",
};

const campaignNames = {
    seasonal1: "spring_school_2025",
    seasonal2: "summer_school_2025",
    seasonal3: "winter_school_2025",
    event1: "mascot_party",
    event2: "science_fair_2025",
    event3: "unset",
    event4: "halloween_2025",
    event5: "christmas_2025",
};

// School list - add as necessary
const schoolCodes = {
    "00XX": "school",
    "00YT": "youtube",
    "01DY": "denenchofu-yukigaya",
    "02KE": "kamata-ekimae",
    "03IG": "ikegami",
    "04TY": "toyocho",
    "05NG": "nagahara",
    "06MN": "monzennakacho",
    "07TG": "togoshi",
    "08SJ": "seijo",
    "09OM": "omori",
    "10WS": "waseda",
    "11RS": "rinkai-shinonome",
    "12SK": "shinkawasaki",
    "13TD": "todoroki",
    "14OJ": "ojima",
    "15MT": "mitaka",
    "16FT": "futamatagawa",
    "17SU": "shin-urayasu",
    "18TN": "tennocho",
    "19MG": "minami-machida-grandberry-park",
    "20OI": "oi",
    "21HM": "harumi",
    "22YT": "yotsuya",
    "23AB": "akabane",
    "24KS": "kita-shinagawa",
    "25MZ": "mizonokuchi",
    "26YK": "yakou",
    "27SM": "socola-minami-gyotoku",
    "28SG": "saginomiya",
    "29MG": "magome",
    "30OK": "okurayama",
    "31MS": "musashi-shinjo",
    "32MK": "musashi-kosugi",
    "33KW": "kawaguchi",
    "34IB": "ikebukuro",
    "35UN": "ueno",
    "36KC": "kanamecho"
};

// Different advertising mediums - add as necessary
const mediumCodes = {
    "fl": "flyer",
    "tv": "tv",
    "wi": "window",
    "sb": "sandwich-board",
    "tx": "ticket",
    "lv": "looping-video",
    "pv": "promo-video",
    "pc": "postcard",
    "po": "poster",
};

// ==================================================
// ---===DO NOT CHANGE ANYTHING BELOW THIS LINE===---
// ==================================================

const campaignMapping = {
    // SET THE DESTINATION OF THE STATIC QR CODES HERE

    "se1": { type: "ev", index: "seasonal1", campaign: campaignNames.seasonal1 },
    "sa1": { type: "ea", index: "seasonal1", campaign: campaignNames.seasonal1 },
    "se2": { type: "ev", index: "seasonal2", campaign: campaignNames.seasonal2 },
    "sa2": { type: "ea", index: "seasonal2", campaign: campaignNames.seasonal2 },
    "se3": { type: "ev", index: "seasonal3", campaign: campaignNames.seasonal3 },
    "sa3": { type: "ea", index: "seasonal3", campaign: campaignNames.seasonal3 },
    "ev1": { type: "ev", index: "event1", campaign: campaignNames.event1 },
    "ea1": { type: "ea", index: "event1", campaign: campaignNames.event1 },
    "ev2": { type: "ev", index: "event2", campaign: campaignNames.event2 },
    "ea2": { type: "ea", index: "event2", campaign: campaignNames.event2 },
    "ev3": { type: "ev", index: "event3", campaign: campaignNames.event3 },
    "ea3": { type: "ea", index: "event3", campaign: campaignNames.event3 },
    "ev4": { type: "ev", index: "event4", campaign: campaignNames.event4 },
    "ea4": { type: "ea", index: "event4", campaign: campaignNames.event4 },
    "ev5": { type: "ev", index: "event5", campaign: campaignNames.event5 },
    "ea5": { type: "ea", index: "event5", campaign: campaignNames.event5 },
};

function handleRedirect() {
    const hash = window.location.hash.substring(1);
    if (!hash) {
        window.location.href = "https://kids-up.jp/";
        return;
    }

    const parts = hash.split("-");
    if (parts.length < 3) {
        window.location.href = "https://kids-up.jp/";
        return;
    }

    const campaignKey = parts[0];
    const schoolKey = parts[1];
    const mediumKey = parts[2];

    const campaignData = campaignMapping[campaignKey];
    if (!campaignData) {
        window.location.href = "https://kids-up.jp/";
        return;
    }

    const school = schoolCodes[schoolKey] || "unknown";
    let medium = mediumCodes[mediumKey] || "unknown";

    // Determine the destination URL based on the campaign type
    let finalUrl;
    if (campaignData.type === "ev") {
        finalUrl = `https://kids-up.jp/${landingPageUrlSlugs[campaignData.index]}`;
    } else if (campaignData.type === "ea") {
        finalUrl = signUpUrlSlugs[campaignData.index];
        medium += "_app_direct";
    } else {
        window.location.href = "https://kids-up.jp/";
        return;
    }

    // Construct the final redirect URL with UTM parameters
    const redirectUrl = `${finalUrl}?utm_source=${school}&utm_medium=${medium}&utm_campaign=${campaignData.campaign}`;

    window.location.href = redirectUrl;
}

window.onload = handleRedirect;

 </script>
</body>
</html>